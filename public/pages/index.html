<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>

    <div class="tic-tac-toe-grid">
        <div class="grid-content">
                <div class="square" id="top-left"> </div>
                <div class="square" id="top-middle"> </div>
                <div class="square" id="top-right"> </div>
                <div class="square" id="middle-left"> </div>
                <div class="square" id="center"> </div>
                <div class="square" id="middle-right"> </div>
                <div class="square" id="bottom-left"> </div>
                <div class="square" id="bottom-middle"> </div>
                <div class="square" id="bottom-right"> </div>
            </div>
        </div>
    </div>

    <p id="victor-text"></p>

    <script>
        var next = "X";
        var victor;

        $('.square').click(function(){
            if (victor != undefined) {return;}
            if (this.clicked == undefined) {
                $(this).text(next);
                check();
                next = (next == "X") ? "O" : "X";
            }
            this.clicked = true;
        });

        function check() {
            tl = $('#top-left').text();
            tm = $('#top-middle').text();
            tr = $('#top-right').text();
            ml = $('#middle-left').text();
            c = $('#center').text();
            mr = $('#middle-right').text();
            bl = $('#bottom-left').text();
            bm = $('#bottom-middle').text();
            br = $('#bottom-right').text();

            if ([tl, tm, tr].filter(square => square == "X").length >= 1 && [tl, tm, tr].filter(square => square == "O").length >= 1
             && [ml, c, mr].filter(square => square == "X").length >= 1 && [ml, c, mr].filter(square => square == "O").length >= 1
             && [bl, bm, br].filter(square => square == "X").length >= 1 && [bl, bm, br].filter(square => square == "O").length >= 1
             && [tl, ml, bl].filter(square => square == "X").length >= 1 && [tl, ml, bl].filter(square => square == "O").length >= 1
             && [tm, c, bm].filter(square => square == "X").length >= 1 && [tm, c, bm].filter(square => square == "O").length >= 1
             && [tr, mr, br].filter(square => square == "X").length >= 1 && [tr, mr, br].filter(square => square == "O").length >= 1
             && [tl, c, br].filter(square => square == "X").length >= 1 && [tl, c, br].filter(square => square == "O").length >= 1
             && [tr, c, bl].filter(square => square == "X").length >= 1 && [tr, c, bl].filter(square => square == "O").length >= 1) {
                    victor = "cat";
                    $('#victor-text').text("Cat's game!");
                }

            if ((tl == tm && tl == tr && tl != " ") || (ml == c && ml == mr && ml != " ") || (bl == bm && bl == br && bl != " ") ||
                (tl == ml && tl == bl && tl != " ") || (tm == c && tm == bm && tm != " ") || (tr == mr && tr == br && tr != " ") ||
                (tl == c && tl == br && tl != " ")  || (tr == c && tr == bl && tr != " ")) {
                    victor = next;
                    $('#victor-text').text(victor + " wins!");
                }


        }
    </script>

</body>

</html>