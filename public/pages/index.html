<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="/scripts/cat.js"></script>
</head>

<body>

    <div class="tic-tac-toe-grid">
        <div class="grid-content">
                <div class="square" id="top-left"> </div>
                <div class="square" id="top-middle"> </div>
                <div class="square" id="top-right"> </div>
                <div class="square" id="middle-left"> </div>
                <div class="square" id="center"> </div>
                <div class="square" id="middle-right"> </div>
                <div class="square" id="bottom-left"> </div>
                <div class="square" id="bottom-middle"> </div>
                <div class="square" id="bottom-right"> </div>
            </div>
        </div>
    </div>

    <p id="victor-text"></p>

    <script>
        var next = "X";
        var victor;

        $('.square').click(function(){
            if (victor != undefined) {return;}
            if (this.clicked == undefined) {
                $(this).text(next);
                check();
                next = (next == "X") ? "O" : "X";
            }
            this.clicked = true;
        });

        function check() {
            tl = $('#top-left').text();
            tm = $('#top-middle').text();
            tr = $('#top-right').text();
            ml = $('#middle-left').text();
            c = $('#center').text();
            mr = $('#middle-right').text();
            bl = $('#bottom-left').text();
            bm = $('#bottom-middle').text();
            br = $('#bottom-right').text();

            if (cat_grids.includes(tl + tm + tr + ml + c + mr + bl + bm + br)) {
                victor = "Cat";
                $('#victor-text').text("Cat's game!");
            } else if ((tl == tm && tl == tr && tl != " ") || (ml == c && ml == mr && ml != " ") || (bl == bm && bl == br && bl != " ") ||
                       (tl == ml && tl == bl && tl != " ") || (tm == c && tm == bm && tm != " ") || (tr == mr && tr == br && tr != " ") ||
                       (tl == c && tl == br && tl != " ")  || (tr == c && tr == bl && tr != " ")) {
                victor = next;
                $('#victor-text').text(victor + " wins!");
            }


        }
    </script>

</body>

</html>